<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ChÃºc má»«ng sinh nháº­t</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: #fff5f8;
    }
    .section { display: none; }
    .section.active { display: block; }
    .intro-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: #ffdce5;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .intro-screen button {
      font-size: 24px;
      padding: 20px 40px;
      background: #ff5b8a;
      border: none;
      border-radius: 15px;
      color: white;
      cursor: pointer;
      box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }
    .box__letter, .letter__border {
      display: none;
    }
    .overlay-bg {
      background-color: rgba(255,255,255,0.9);
      padding: 20px;
      border-radius: 10px;
      max-width: 800px;
      margin: 0 auto;
      color: #d00;
      font-weight: bold;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
    }
    .box__account {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }
    .box__account .image img {
      width: 150px;
      border-radius: 50%;
    }
    .box__account .name {
      margin-top: 10px;
      font-size: 18px;
      font-weight: bold;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      white-space: nowrap;
    }
    .text__letter p {
      white-space: normal;
      line-height: 1.6;
      font-size: 18px;
    }
  </style>
</head>
<body>

<!-- Intro -->
<div class="intro-screen" id="intro">
  <button onclick="startApp()">Báº¥m vÃ o Ä‘Ã¢y Ä‘i ðŸŽ‰</button>
</div>

<!-- Nháº¡c -->
<audio id="birthdayMusic" autoplay loop muted>
  <source src="./audio/cmsn.mp3" type="audio/mpeg">
</audio>

<!-- Pháº§n 1 -->
<div id="section1" class="section">
  <div class="flag__birthday">
    <img src="./images/1.png" alt="" width="350" class="flag__left">
    <img src="./images/1.png" alt="" width="350" class="flag__right">
  </div>
  <div class="content">
    <div class="left">
      <div class="title">
        <h1 class="happy">
          <span style="--t: 4s;">H</span><span style="--t: 4.2s;">a</span><span style="--t: 4.4s;">p</span><span style="--t: 4.6s;">p</span><span style="--t: 4.8s;">y</span>
        </h1>
        <h1 class="birthday">
          <span style="--t: 5s;">B</span><span style="--t: 5.2s;">i</span><span style="--t: 5.4s;">r</span><span style="--t: 5.6s;">t</span><span style="--t: 5.8s;">h</span><span style="--t: 6s;">d</span><span style="--t: 6.2s;">a</span><span style="--t: 6.4s;">y</span>
        </h1>
        <div class="hat"><img src="./images/hat.png" alt="" width="130"></div>
      </div>
      <div class="date__of__birth"><span></span></div>
      <div class="btn">
        <button id="btn__letter">áº¤n vÃ o Ä‘Ã¢y nÃ¨ cáº­u <i class="fa-regular fa-envelope"></i></button>
      </div>
    </div>
    <div class="right">
      <div class="box__account">
        <div class="image"><img src="./images/ha.jpg" alt=""/></div>
        <div class="name"><i class="fa-solid fa-heart"></i><span>Nguyá»…n Minh NguyÃªn</span><i class="fa-solid fa-heart"></i></div>
      </div>
    </div>
  </div>
</div>

<!-- Pháº§n 2 -->
<div id="section2" class="section">
  <div class="box__letter">
    <div class="letter__border">
      <div class="letter">
        <iframe class="letter__bg" src="https://taoanhdep.com/love/?b=eyJ0IjpbImNow7pjIG3hu6tuZyBzaW5oIG5o4bqtdCBOZ3V5w6puIiwiTmd1ecOqbiBzaW5oIG5o4bqtdCB2dWkgduG6uyIsImNow7pjIG3hu6tuZyBzaW5oIGPhuq11IG5ow6kiLCJzaW5oIG5o4bqtdCB2dWkgduG6uyBuaGEiXX0=" allowfullscreen></iframe>
        <div class="overlay-bg">
          <div class="content__letter">
            <div class="left">
              <img id="heart__letter" src="https://media.giphy.com/media/VyB31XTqZNJhFRZNyl/giphy.gif" alt="">
              <img class="heart heart_1" width="5" src="./images/heart.png" alt="">
              <img class="heart heart_2" width="5" src="./images/heart.png" alt="">
              <img class="heart heart_3" width="5" src="./images/heart.png" alt="">
              <img class="heart heart_4" width="5" src="./images/heart.png" alt="">
            </div>
            <div class="right">
              <div class="love__img">
                <img src="https://media.giphy.com/media/DyQrKMpqkAhNHZ1iWe/giphy.gif" alt="" width="50">
              </div>
              <div class="text__letter"><p></p></div>
              <img id="mewmew" width="50" src="./images/mewmew.gif" alt="">
            </div>
            <div class="title__letter"></div>
            <div class="close"><i class="fa-solid fa-xmark"></i></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Script -->
<script>
function startApp() {
  document.getElementById("intro").style.display = "none";
  document.getElementById("section1").classList.add("active");

  const music = document.getElementById("birthdayMusic");
  music.muted = false;
  music.play();

  // Cháº¡y hiá»‡u á»©ng gÃµ ngÃ y sinh
  const datetxt = "25-06-2009";
  const datatxtletter = `âœ¨ ChÃºc má»«ng sinh nháº­t nha! ChÃºc báº¡n tuá»•i má»›i tháº­t vui váº», luÃ´n cÆ°á»i tÆ°Æ¡i, há»c tá»‘t vÃ  gáº·p nhiá»u Ä‘iá»u may máº¯n. Hy vá»ng báº¡n sáº½ luÃ´n giá»¯ Ä‘Æ°á»£c sá»± dá»… thÆ°Æ¡ng vÃ  Ä‘Ã¡ng yÃªu nhÆ° bÃ¢y giá». ChÃºc sinh nháº­t tháº­t háº¡nh phÃºc vÃ  nháº­n Ä‘Æ°á»£c tháº­t nhiá»u quÃ  nha! ðŸŽ‚ðŸŽðŸ’–`;
  const titleLetter = "Gá»­i NguyÃªn";

  const dateSpan = document.querySelector(".date__of__birth span");
  let index = 0, finished = false;
  let transitionTimeout;

  const interval = setInterval(() => {
    if (index < datetxt.length) {
      dateSpan.textContent += datetxt[index++];
    } else {
      clearInterval(interval);
      document.querySelector(".date__of__birth").prepend(document.createElement("i")).className = "fa-solid fa-star";
      document.querySelector(".date__of__birth").appendChild(document.createElement("i")).className = "fa-solid fa-star";
      finished = true;
      transitionTimeout = setTimeout(startTransition, 5000);
    }
  }, 100);

  document.getElementById("btn__letter").addEventListener("click", () => {
    if (!finished) clearTimeout(transitionTimeout);
    startTransition();
  });

  function startTransition() {
    document.getElementById("section1").classList.remove("active");
    document.getElementById("section2").classList.add("active");
    showLetter();
  }

  function showLetter() {
    const titleArr = titleLetter.split('');
    const contentArr = datatxtletter.split('');
    let i = 0, j = 0;

    $(".box__letter").slideDown();
    setTimeout(() => $(".letter__border").slideDown(), 1000);

    setTimeout(() => {
      const el = document.querySelector(".title__letter");
      const intervalTitle = setInterval(() => {
        if (i < titleArr.length) {
          el.textContent += titleArr[i];
          const heart = document.createElement("i");
          heart.className = "fa-solid fa-heart";
          el.appendChild(heart);
          i++;
        } else clearInterval(intervalTitle);
      }, 100);
    }, 2000);

    setTimeout(() => {
      document.querySelector("#heart__letter").classList.add("animationOp");
      document.querySelector(".love__img").classList.add("animationOp");
      document.querySelector("#mewmew").classList.add("animationOp");
    }, 2800);

    setTimeout(() => {
      document.querySelectorAll(".heart").forEach(h => h.classList.add("animation"));
    }, 3500);

    setTimeout(() => {
      const p = document.querySelector(".text__letter p");
      const intervalContent = setInterval(() => {
        if (j < contentArr.length) {
          p.textContent += contentArr[j++];
        } else clearInterval(intervalContent);
      }, 50);
    }, 6000);
  }
}
</script>

</body>
</html>
